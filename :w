
<div class="six wide column">
   <!-- j<h2 class="ui header">
    <i class="settings icon"></i>
    <div class="content">
      Historias en curso!
      <div class="sub header">
        Administra tus historias en seguimiento.
      </div>
    </div>
  </h2> -->
 <div class="ui fluid vertical menu">
  <div class="header item">
    Historias!
  </div>

  <% if !@user_stories.nil? %>
    <% @user_stories.each do |story| %>
      <div class="item">
        <p><%= story.body %></p>
      </div>
    <% end %>
  <% else %>
    No hay historias
  <% end %>

 </div>
</div>


<div class="six wide column">
  <div class="ui fluid vertical menu">
    <div class="header item">
      En desarrollo!
    </div>
    <% if !@stories.nil? %>
      <% @stories.each do |story| %>
        <div class="text item">
          <div class="ui icon button">
            <i class="settings icon"></i>
          </div>
          <p><%= story.body %></p>
          
        </div>
          <div class="3 fluid blue small icon ui  buttons">
            <div class="ui button">
              <i class="pause icon "></i>
            </div>
            <div class="ui button">
              <i class="play icon "></i>
            </div>
            <div class="ui button">
              <i class="shuffle icon "></i>
            </div>
          </div>
      <% end %>
    <% else %>
      No hay historias
    <% end %>
  </div>
</div>

<% content_for :final_scripts do %>
  <%= javascript_include_tag "underscore-min" %>
  <script src="http://localhost:8080/socket.io/socket.io.js"></script>
  <script>
    var user = <%= current_user.id %>;
    var socket = io.connect( 'http://localhost:8080' );
    socket.on( 'welcome', function( data ){
      console.log( data );
      //socket.emit( 'start', { msg: 'hola mundo' });
    })

    socket.on( 'new_extend', function( data ){
      extend = JSON.parse( data );
      console.log( extend.id, extend.followers );
      if (_.contains( extend.followers, user ) && extend.owner.id != user ){
        console.log( 'alert me' );
      }
    })
  </script>
<% end %>
